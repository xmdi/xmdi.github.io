<style>
#scr,#sol,#MC,#MC2,#url{background-color:black;color:white;font-size:18px}
</style>
<body style="text-align:center;" bgcolor="black" onLoad="initGraphics();">
	<canvas id="glC"></canvas>
	<script src="app.js"></script>
	<script src="cube.js"></script>
<script>
	/*window.onload = function() {
		let searchParams = new URLSearchParams(window.location.search);
		for (var pair of searchParams.entries())
		{
			if (pair[0]=="sc")
			{
				var sc0=searchParams.get('sc').replace(/_/g," ");
				document.getElementById("scr").innerHTML=sc0;
				pScr(0);
			}
			else if (pair[0]=="so")
			{
				var so0=searchParams.get('so');
				so0=so0.replace(/_\^n_/g,"\n").replace(/_/g," ");
				document.getElementById("sol").innerHTML=so0;
				pScr(99);
			}
		}
	}*/
	function writeMC(){
		var str="";
		var sol=document.getElementById("sol").value.split(/\r|\r\n|\n/);
		var mc=0;
		var nsc=0;
		for (i=0;i<sol.length;i++){
			var ns=0;
      		var m=0;
			var soli =sol[i].trim().split(" ");
      			for(j=0;j<soli.length;j++){
					if(((soli[j][0]=="R")||(soli[j][0]=="L")||(soli[j][0]=="U")||(soli[j][0]=="D")||(soli[j][0]=="F")||(soli[j][0]=="B")||(soli[j][0]=="r")||(soli[j][0]=="l")||(soli[j][0]=="u")||(soli[j][0]=="d")||(soli[j][0]=="f")||(soli[j][0]=="b")||(soli[j][0]=="E")||(soli[j][0]=="M")||(soli[j][0]=="S"))&&((soli[j].length==1)||(soli[j][1]=="'")||(soli[j][1]=="2"))){
						m+=1;
						if((soli[j][0]=="E")||(soli[j][0]=="M")||(soli[j][0]=="S"))
							ns+=1;
					}
				}	
      			if(m){
					str+=m+ns+"h|"+m+"s\n";
					mc+=m;
					nsc+=ns;
				}
			else
				str+="\n"
		}
		document.getElementById("MC").innerHTML= str;
		document.getElementById("MC2").innerHTML=mc+nsc+"h|"+mc+"s";
	}
	function writeURL()
	{
		var sc1=document.getElementById("scr").value.replace(/\n/g,'_^n_').replace(/ /g,'_')
		var so1=document.getElementById("sol").value.replace(/\n/g,'_^n_').replace(/ /g,'_')
		document.getElementById("url").innerHTML="http://xmdi.github.io?sc="+sc1+"&so="+so1;
	}
	function pScr(w){
		var pos,scr,sol,seq;
		if (w==0)
			seq=document.getElementById("scr").value;
		else if (w==99)
			seq=document.getElementById("scr").value+document.getElementById("sol").value;
		else if (w==1)
		{
			pos=document.getElementById("scr").selectionStart;
			seq=document.getElementById("scr").value.substring(0,pos).replace(/\n/g," ");
		}
		else if (w==2)
		{
			pos=document.getElementById("sol").selectionStart;
			scr=document.getElementById("scr").value.replace(/\n/g," ");
			sol=document.getElementById("sol").value.substring(0,pos).replace(/\n/g," ");
			seq=scr+" "+sol;
		}
		scrmoves = seq.split(" ");
		cs=solved;
		for (q=0;q<scrmoves.length;q++)
			if (scrmoves[q].length)
				cs=moveMaker(scrmoves[q],cs);
		tamperVertices();
		writeURL();
		writeMC();
	}
	var cs;
</script>
<div>
	<textarea id="scr" onclick="pScr(1)" onkeyup="pScr(1)" placeholder="SCRAMBLE" type="text" rows="1" cols="60"></textarea><br>
	<table align="center"><tr><td><textarea id="sol" onclick="pScr(2)" onkeyup="pScr(2)" placeholder="SOLUTION" type="text" rows="8" cols="51"></textarea>
			</td><td><textarea id="MC" readonly="readonly" onclick="pScr(2)" onkeyup="pScr(2)" type="text" rows="8" cols="7"></textarea>
			</td></tr>
			<tr><td></td>
			<td><textarea id="MC2" readonly="readonly" onclick="pScr(2)" onkeyup="pScr(2)" type="text" rows="1" cols="7"></textarea>
			</td></tr></table>
<textarea id="url" style="font-size:10px" onclick="this.focus();this.select()" readonly="readonly" rows="3" cols="120"> </textarea>
</div>
</body>